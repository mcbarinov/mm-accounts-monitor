{% extends "inc/base.j2" %}
{% block content %}
<div class="page-header">
  <h2>balances / {{ balances | length }}</h2>
  {{form.group}}
  <form class="inline">
    <select name="group">
      <option value="">-- all groups --</option>
      {% for g in groups %}
      {{option(g.id | string, form.group, g.name)}}
      {% endfor %}
    </select>
    <select name="coin">
      <option value="">-- all coins --</option>
      {% for c in coins %}
      {{option(c.id, form.coin, c.network ~ ' / ' ~ c.symbol)}}
      {% endfor %}
    </select>
    <input type="number" name="limit" value="{{ form.limit or 1000 }}" placeholder="limit" min="1"></input>
    <button type="submit" class="outline">filter</button>
  </form>
</div>

<table>
  <tr>
    <th>account</th>
    <th>coin</th>
    <th>balance</th>
    <th>balance_raw</th>
    <th>checked_at</th>
    <th>actions</th>
  </tr>
  {% for b in balances %}
  <tr>
    <td>{{ b.account }}</td>
    <td>{{ b.coin }}</td>
    <td>{{ b.balance | empty }}</td>
    <td>{{ b.balance_raw | empty }}</td>
    <td>{{ b.checked_at | dt }}</td>
    <td>
      <details class="dropdown">
        <summary>actions</summary>
        <ul>
          <li><a href="/api-post/account-balances/{{ b.id }}/check">check</a></li>
          <li><a href="/api/account-balances/{{ b.id }}">view</a></li>
        </ul>
      </details>
    </td>
  </tr>
  {% endfor %}
</table>

{% endblock %}